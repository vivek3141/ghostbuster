Supreme Court grapples with rules on derivatives and currency trading